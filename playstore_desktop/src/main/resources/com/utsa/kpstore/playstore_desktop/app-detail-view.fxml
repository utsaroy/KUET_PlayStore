<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>

<VBox spacing="30" styleClass="padding-medium" stylesheets="@styles/styles.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.utsa.kpstore.playstore_desktop.controllers.AppDetailViewController">
    

    <VBox fx:id="adminControlsBox" visible="false" managed="false" spacing="15" style="-fx-background-color: #E3F2FD; -fx-padding: 10; -fx-background-radius: 5; -fx-border-color: #2196F3; -fx-border-radius: 5; -fx-border-width: 1;">
        <HBox alignment="CENTER_LEFT" spacing="20">
            <Button text="← Back to Admin List" onAction="#handleAdminBack" style="-fx-background-color: transparent; -fx-text-fill: #1976D2; -fx-underline: true; -fx-cursor: hand; -fx-font-weight: bold;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="Viewing as User" style="-fx-font-weight: bold; -fx-text-fill: #1976D2;"/>
        </HBox>
    </VBox>

    <HBox alignment="CENTER" spacing="30" styleClass="detail-header">
        <children>
       <ImageView fx:id="appIcon" fitHeight="150.0" fitWidth="200.0" pickOnBounds="true" preserveRatio="true">
          <image>
             <Image url="@images/logo.png" />
          </image>
          <HBox.margin>
             <Insets left="20.0" />
          </HBox.margin>
       </ImageView>

            <VBox spacing="15" HBox.hgrow="ALWAYS">
                <children>
                    <VBox spacing="8">
                        <Text fx:id="appTitle" fill="#0a4589" styleClass="detail-title" text="GPA Calculator">
                   <font>
                      <Font name="System Bold" size="31.0" />
                   </font></Text>
                        <Text fx:id="appDeveloper" fill="#1f4971" styleClass="detail-developer" text="Utsa Roy (CSE'22)">
                   <font>
                      <Font size="18.0" />
                   </font></Text>
                        <HBox spacing="10">
                            <Label fx:id="appCategory" styleClass="tag" text="Educational" />
                   <VBox.margin>
                      <Insets />
                   </VBox.margin>
                        </HBox>
                    </VBox>
                    

                    <HBox alignment="CENTER_LEFT" spacing="40">
                        <VBox alignment="CENTER" spacing="8" styleClass="stat-card">
                            <children>
                                 <Text fx:id="averageRatingText" fill="#082984" styleClass="stat-value" text="4.5">
                         <font>
                            <Font size="18.0" />
                         </font>
                      </Text>
                                <Text fx:id="ratingCountText" text="245 REVIEWS" />
                            </children>
                        </VBox>
                <Separator orientation="VERTICAL" />
                        
                        <VBox alignment="CENTER" spacing="8" styleClass="stat-card">
                            <children>
                                 <Text fx:id="downloadsText" fill="#082984" styleClass="stat-value" text="1.2K">
                         <font>
                            <Font size="18.0" />
                         </font>
                      </Text>
                                <Text styleClass="stat-label" text="DOWNLOADS" />
                            </children>
                        </VBox>
                <Separator orientation="VERTICAL" />
                        
                        <VBox alignment="CENTER" spacing="8" styleClass="stat-card">
                            <children>
                                 <Text fx:id="appVersion" fill="#082984" style="-fx-font-size: 18px;" text="Dec 5" />
                                <Text styleClass="stat-label" text="UPDATED" />
                            </children>
                        </VBox>
                    </HBox>
                </children>
          <HBox.margin>
             <Insets top="10.0" />
          </HBox.margin>
            </VBox>
        </children>
    </HBox>
        <HBox alignment="CENTER_LEFT" spacing="15">
            <Button fx:id="downloadButton" onAction="#handleDownload" styleClass="download-button" stylesheets="@styles/styles.css" text="Download" />
    <VBox.margin>
       <Insets bottom="20.0" left="20.0" top="20.0" />
    </VBox.margin>
        </HBox>
      


    <VBox spacing="15" style="-fx-background-color: -fx-surface; -fx-padding: 25; -fx-background-radius: 12;">
        <children>
            <Text fill="#082984" style="-fx-font-size: 20px; -fx-font-weight: bold;" text="About This App" />
            
            <Text fx:id="appDescription" styleClass="description-text" text="Study Buddy Pro is your ultimate companion for academic success at KUET. Whether you're managing your class schedule, organizing notes, or tracking your progress, this app has everything you need to stay on top of your studies.&#10;&#10;Key Features:&#10;• Smart Study Planner - Create and manage your study schedule efficiently&#10;• Note Taking - Organize your class notes with rich text formatting&#10;• Progress Tracking - Monitor your academic performance over time&#10;• Reminder System - Never miss an assignment or exam deadline&#10;• Resource Library - Store and access your study materials in one place&#10;• Dark Mode - Study comfortably at any time of day&#10;&#10;Built specifically for KUET students, Study Buddy Pro understands your academic needs and helps you achieve your goals." />
        </children>
    </VBox>

    <VBox alignment="TOP_CENTER" spacing="20" style="-fx-background-color: -fx-surface; -fx-padding: 25; -fx-background-radius: 12;">
        <children>
            <HBox alignment="CENTER_LEFT">
                <Text fill="#082984" style="-fx-font-size: 20px; -fx-font-weight: bold;" text="User Reviews" />
                <Region HBox.hgrow="ALWAYS" />
                <Button fx:id="rateButton" onAction="#handleRateApp" style="-fx-padding: 8 20; -fx-font-size: 12px;" styleClass="primary-button" text="Write a Review" />
            </HBox>
            

            <HBox spacing="40" style="-fx-padding: 15; -fx-background-color: -fx-background; -fx-background-radius: 8;">
                <VBox alignment="CENTER" spacing="5">
                    <Text fx:id="averageRatingTextLarge" style="-fx-font-size: 48px; -fx-font-weight: bold; -fx-fill: #FFA000;" text="4.5" />
                    <Text fx:id="ratingCountTextSmall" style="-fx-font-size: 13px; -fx-fill: -fx-text-secondary;" text="245 reviews" />
                </VBox>
                
                <VBox spacing="8" HBox.hgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Text style="-fx-font-size: 13px; -fx-min-width: 15px;" text="5" />
                        <ProgressBar fx:id="rating5Bar" prefHeight="8" prefWidth="200" progress="0.7" style="-fx-accent: #FFA000;" />
                        <Text fx:id="rating5Count" style="-fx-font-size: 13px; -fx-fill: -fx-text-secondary;" text="172" />
                    </HBox>
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Text style="-fx-font-size: 13px; -fx-min-width: 15px;" text="4" />
                        <ProgressBar fx:id="rating4Bar" prefHeight="8" prefWidth="200" progress="0.2" style="-fx-accent: #FFA000;" />
                        <Text fx:id="rating4Count" style="-fx-font-size: 13px; -fx-fill: -fx-text-secondary;" text="49" />
                    </HBox>
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Text style="-fx-font-size: 13px; -fx-min-width: 15px;" text="3" />
                        <ProgressBar fx:id="rating3Bar" prefHeight="8" prefWidth="200" progress="0.08" style="-fx-accent: #FFA000;" />
                        <Text fx:id="rating3Count" style="-fx-font-size: 13px; -fx-fill: -fx-text-secondary;" text="20" />
                    </HBox>
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Text style="-fx-font-size: 13px; -fx-min-width: 15px;" text="2" />
                        <ProgressBar fx:id="rating2Bar" prefHeight="8" prefWidth="200" progress="0.01" style="-fx-accent: #FFA000;" />
                        <Text fx:id="rating2Count" style="-fx-font-size: 13px; -fx-fill: -fx-text-secondary;" text="3" />
                    </HBox>
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Text style="-fx-font-size: 13px; -fx-min-width: 15px;" text="1" />
                        <ProgressBar fx:id="rating1Bar" prefHeight="8" prefWidth="200" progress="0.004" style="-fx-accent: #FFA000;" />
                        <Text fx:id="rating1Count" style="-fx-font-size: 13px; -fx-fill: -fx-text-secondary;" text="1" />
                    </HBox>
                </VBox>
            </HBox>
            
            <Separator />

            <VBox fx:id="reviewsContainer" spacing="20">

            </VBox>
        </children>
    </VBox>
    
    <VBox.margin>
        <Insets bottom="20" />
    </VBox.margin>
</VBox>
